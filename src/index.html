<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LastFM API Project</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Asap:wght@400;600&family=Josefin+Slab:ital,wght@0,300;0,400;1,300&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script type="text/javascript" src="js/lastfm.api.js"></script>
  </head>

  <body>
    <h1 class="header">LastFM Chart Bot</h1>
    <h2 class="Header-text">What is trending?</h2>
    \
    <div class="image1">
      <img src="images/lastfm.png" alt="LastFM Logo" />
    </div>
    <script type="text/javascript" src="js/index.js"></script>
    <script>
      {
        function StartApplication() {
          var Turl =
            "https://ws.audioscrobbler.com/2.0/?api_key=5908c0487c4b5f26281c158dd83b59d6&format=json&method=user.getTopArtists&user=dior-_-&period=overall&limit=200";
          var request = new XMLHttpRequest();
          request.open(
            "GET",
            "https://ws.audioscrobbler.com/2.0/?api_key=5908c0487c4b5f26281c158dd83b59d6&format=json&method=user.getTopArtists&user=dior-_-&period=overall&limit=200",
            true
          );

          request.onload = function () {
            if (this.status >= 200 && this.status < 400) {
              // Success!
              var data = JSON.parse(this.response);
            } else {
            }
          };

          request.onerror = function () {
            // There was a connection error of some sort
          };

          request.send();
          var elements = document.querySelectorAll(data.topartists.artist);
          Array.prototype.forEach.call(data.topartists.artist),
            function (i, item) {
              currArtist =
                "<div class='artist p" +
                (i + 1) +
                "'> \
                      <div class='pos'>" +
                (i + 1) +
                "</div> \
                      <div class='nm'>" +
                data.topartists.artist[i].name +
                "</div> \
                      <div class='pc'>" +
                data.topartists.artist[i].playcount +
                "</div> \
                      </div>";
              "#output".append(currArtist);
            };
        }
      }

      var url =
        "https://ws.audioscrobbler.com/2.0/?api_key=5908c0487c4b5f26281c158dd83b59d6&format=json&method=user.getTopArtists&user=dior-_-&period=overall&limit=200";
      url,
        function (data) {
          var elements = document.querySelectorAll(data.topartists.artist);
          Array.prototype.forEach.call(elements, function (i, el) {});
          currArtist =
            "<div class='artist p" +
            (i + 1) +
            "'> \
                      <div class='pos'>" +
            (i + 1) +
            "</div> \
                      <div class='nm'>" +
            data.topartists.artist[i].name +
            "</div> \
                      <div class='pc'>" +
            data.topartists.artist[i].playcount +
            "</div> \
                      </div>";
        };
      let btn = document.createElement("button");
      btn.innerHTML = "Save";
      btn.addEventListener("click", function StartApplication() {});
      document.body.appendChild(btn);
    </script>
    <button type="submit" name="formBtn">Submit</button>
  </body>
</html>
